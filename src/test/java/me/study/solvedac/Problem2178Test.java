package me.study.solvedac;

import org.junit.jupiter.params.ParameterizedTest;
import org.junit.jupiter.params.provider.CsvSource;

import java.util.ArrayList;
import java.util.List;
import java.util.StringTokenizer;

import static org.assertj.core.api.Assertions.assertThat;

class Problem2178Test {

    @ParameterizedTest
    @CsvSource(value = {"4 6 15," +
                        "101111," +
                        "101010," +
                        "101011," +
                        "111011",

                        "4 6 9," +
                        "110110," +
                        "110110," +
                        "111111," +
                        "111101",

                        "2 25 38," +
                        "1011101110111011101110111," +
                        "1110111011101110111011101",

                        "7 7 13," +
                        "1011111," +
                        "1110001," +
                        "1000001," +
                        "1000001," +
                        "1000001," +
                        "1000001," +
                        "1111111",

                        "2 2 3," +
                        "10," +
                        "11",

                        "100 100 1," +
                        "1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111," +
                        "1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111," +
                        "1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111," +
                        "1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111," +
                        "1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111," +
                        "1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111," +
                        "1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111," +
                        "1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111," +
                        "1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111," +
                        "1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111," +
                        "1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111," +
                        "1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111," +
                        "1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111," +
                        "1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111," +
                        "1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111," +
                        "1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111," +
                        "1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111," +
                        "1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111," +
                        "1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111," +
                        "1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111," +
                        "1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111," +
                        "1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111," +
                        "1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111," +
                        "1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111," +
                        "1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111," +
                        "1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111," +
                        "1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111," +
                        "1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111," +
                        "1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111," +
                        "1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111," +
                        "1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111," +
                        "1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111," +
                        "1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111," +
                        "1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111," +
                        "1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111," +
                        "1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111," +
                        "1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111," +
                        "1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111," +
                        "1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111," +
                        "1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111," +
                        "1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111," +
                        "1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111," +
                        "1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111," +
                        "1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111," +
                        "1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111," +
                        "1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111," +
                        "1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111," +
                        "1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111," +
                        "1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111," +
                        "1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111," +
                        "1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111," +
                        "1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111," +
                        "1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111," +
                        "1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111," +
                        "1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111," +
                        "1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111," +
                        "1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111," +
                        "1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111," +
                        "1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111," +
                        "1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111," +
                        "1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111," +
                        "1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111," +
                        "1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111," +
                        "1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111," +
                        "1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111," +
                        "1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111," +
                        "1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111," +
                        "1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111," +
                        "1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111," +
                        "1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111," +
                        "1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111," +
                        "1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111," +
                        "1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111," +
                        "1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111," +
                        "1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111," +
                        "1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111," +
                        "1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111," +
                        "1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111," +
                        "1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111," +
                        "1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111," +
                        "1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111," +
                        "1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111," +
                        "1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111," +
                        "1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111," +
                        "1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111," +
                        "1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111," +
                        "1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111," +
                        "1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111," +
                        "1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111," +
                        "1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111," +
                        "1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111," +
                        "1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111," +
                        "1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111," +
                        "1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111," +
                        "1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111," +
                        "1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111," +
                        "1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111," +
                        "1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111," +
                        "1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111," +
                        "1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111"
    }, delimiter = Character.MAX_HIGH_SURROGATE, maxCharsPerColumn = 10_000_000)
    void search(String resource) {

        StringTokenizer resourceTokenizer = new StringTokenizer(resource, ",");
        int[] parameter = getParameter(resourceTokenizer.nextToken());
        List<List<Integer>> map = getMap(resourceTokenizer);
        Problem2178 sut = new Problem2178(map);

        assertThat(sut.search(parameter[0], parameter[1])).isEqualTo(parameter[2]);
    }

    private List<List<Integer>> getMap(StringTokenizer resourceTokenizer) {
        List<List<Integer>> map = new ArrayList<>();
        while (resourceTokenizer.hasMoreTokens()) {
            String[] stringMap = resourceTokenizer.nextToken().split("");
            ArrayList<Integer> row = new ArrayList<>();
            for (final String m : stringMap) {
                row.add(Integer.parseInt(m));
            }
            map.add(row);
        }
        return map;
    }

    private int[] getParameter(String parameterResource) {
        StringTokenizer tokenizer = new StringTokenizer(parameterResource);
        int n = Integer.parseInt(tokenizer.nextToken());
        int m = Integer.parseInt(tokenizer.nextToken());
        int expected = Integer.parseInt(tokenizer.nextToken());
        return new int[]{n, m, expected};
    }

}
